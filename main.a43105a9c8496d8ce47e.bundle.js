(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{265:function(module,exports,__webpack_require__){__webpack_require__(266),__webpack_require__(412),module.exports=__webpack_require__(413)},330:function(module,exports){},413:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(264);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(603)],module)}.call(this,__webpack_require__(414)(module))},603:function(module,exports,__webpack_require__){var map={"./InfiniteScroll/SimpleInfiniteScroller.stories.tsx":604};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=603},604:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ScrolldownList",(function(){return SimpleInfiniteScroller_stories_ScrolldownList})),__webpack_require__.d(__webpack_exports__,"ScrollUpList",(function(){return SimpleInfiniteScroller_stories_ScrollUpList}));var slicedToArray=__webpack_require__(81),react=__webpack_require__(8),react_default=__webpack_require__.n(react),objectSpread2=__webpack_require__(162),getScrollableParent=function getScrollableParent(element){if(!element)return document.body;var overflow=window.getComputedStyle(element).getPropertyValue("overflow"),overflowY=window.getComputedStyle(element).getPropertyValue("overflow-y");return"scroll"===overflow||"scroll"===overflowY||"auto"===overflow||"auto"===overflowY?element:getScrollableParent(element.parentElement)};var SimpleInfiniteScroller=function ScrollableContainer(_ref){var loadMore=_ref.loadMore,children=_ref.children,_ref$canScrollUp=_ref.canScrollUp,canScrollUp=void 0!==_ref$canScrollUp&&_ref$canScrollUp,_ref$canScrollDown=_ref.canScrollDown,canScrollDown=void 0!==_ref$canScrollDown&&_ref$canScrollDown,_ref$nextScrollThresh=_ref.nextScrollThreshold,nextScrollThreshold=void 0===_ref$nextScrollThresh?250:_ref$nextScrollThresh,_ref$reverse=_ref.reverse,reverse=void 0!==_ref$reverse&&_ref$reverse,_useState=Object(react.useState)(),_useState2=Object(slicedToArray.a)(_useState,2),childNode=_useState2[0],setChildNode=_useState2[1],_useState3=Object(react.useState)(),_useState4=Object(slicedToArray.a)(_useState3,2),scrollState=_useState4[0],setScrollState=_useState4[1];return Object(react.useEffect)((function(){var nextLoad="none",unmounted=!1;if(childNode){var scrollableNode=getScrollableParent(childNode),onScroll=function onScroll(event){if(!unmounted){var node=event.target,marginBottom=node.scrollHeight-(node.scrollTop+node.clientHeight);(reverse?node.scrollHeight+(node.scrollTop-node.clientHeight):node.scrollTop)<nextScrollThreshold&&"up"!==nextLoad&&canScrollUp&&!scrollState?(nextLoad="up",scrollableNode&&setScrollState({direction:nextLoad,snapshot:{scrollHeight:scrollableNode.scrollHeight,scrollTop:scrollableNode.scrollTop}}),loadMore(!1)):marginBottom<nextScrollThreshold&&"down"!==nextLoad&&canScrollDown&&!scrollState&&(nextLoad="down",scrollableNode&&setScrollState({direction:nextLoad,snapshot:{scrollHeight:scrollableNode.scrollHeight,scrollTop:scrollableNode.scrollTop}}),loadMore(!0))}};return scrollableNode&&scrollableNode.addEventListener("scroll",onScroll),function(){unmounted=!0,scrollableNode&&scrollableNode.removeEventListener("scroll",onScroll)}}}),[canScrollUp,scrollState,loadMore,setScrollState,nextScrollThreshold,canScrollDown,childNode,reverse]),Object(react.useEffect)((function(){if(childNode){var scrollableNode=getScrollableParent(childNode);if(scrollableNode&&scrollState){var snapshot=scrollState.snapshot,direction=scrollState.direction;scrollableNode.scrollHeight!==snapshot.scrollHeight&&("up"!==direction||reverse||(scrollableNode.scrollTop=scrollableNode.scrollHeight-snapshot.scrollHeight),setScrollState(void 0))}}}),[children,scrollState,childNode,reverse]),Object(react.useEffect)((function(){if(childNode){var scrollableNode=getScrollableParent(childNode),scrollHeight=(null==scrollableNode?void 0:scrollableNode.scrollHeight)||0,clientHeight=(null==scrollableNode?void 0:scrollableNode.clientHeight)||0,scrollTop=(null==scrollableNode?void 0:scrollableNode.scrollTop)||0;scrollHeight===clientHeight&&canScrollDown&&0===scrollTop?loadMore(!0):scrollHeight===clientHeight&&canScrollUp&&0===scrollTop&&loadMore(!1)}}),[loadMore,canScrollDown,canScrollUp,children,childNode]),Object(react.useMemo)((function(){var childProps=Object(objectSpread2.a)(Object(objectSpread2.a)({},children.props),{},{ref:function ref(value){if(value){if(children.ref)if("function"==typeof children.ref)children.ref(value);else children.ref.current=value;reverse&&(value.style.display="flex",value.style.flexDirection="column-reverse"),setChildNode(value)}}});return react_default.a.cloneElement(children,childProps)}),[children,reverse])},style=(__webpack_exports__.default={title:"SimpleInfiniteScroller"},{height:"70vh",overflowY:"auto",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"10px"}),AllData=Array.from(new Array(300)).map((function(v,i){return"".concat(i," test")})),SimpleInfiniteScroller_stories_useLoader=function useLoader(){var _useState=Object(react.useState)([]),_useState2=Object(slicedToArray.a)(_useState,2),data=_useState2[0],setData=_useState2[1],hasMore=data.length<AllData.length,loadMore=Object(react.useCallback)((function(){hasMore&&setTimeout((function(){setData((function(prev){return AllData.slice(0,prev.length+50)}))}),500)}),[hasMore]);return{hasMore:hasMore,loadMore:loadMore,data:data}},SimpleInfiniteScroller_stories_ScrolldownList=function ScrolldownList(){var _useLoader=SimpleInfiniteScroller_stories_useLoader(),hasMore=_useLoader.hasMore,loadMore=_useLoader.loadMore,data=_useLoader.data;return react_default.a.createElement(SimpleInfiniteScroller,{canScrollDown:hasMore,loadMore:loadMore},react_default.a.createElement("ul",{style:style},data.map((function(v){return react_default.a.createElement("li",{key:v},v)}))))},SimpleInfiniteScroller_stories_ScrollUpList=function ScrollUpList(){var _useLoader2=SimpleInfiniteScroller_stories_useLoader(),hasMore=_useLoader2.hasMore,loadMore=_useLoader2.loadMore,data=_useLoader2.data;return react_default.a.createElement(SimpleInfiniteScroller,{loadMore:loadMore,canScrollUp:hasMore,reverse:!0},react_default.a.createElement("ul",{style:style},data.map((function(v){return react_default.a.createElement("li",{key:v},v)}))))}}},[[265,1,2]]]);
//# sourceMappingURL=main.a43105a9c8496d8ce47e.bundle.js.map